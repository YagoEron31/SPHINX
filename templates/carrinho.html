<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho | SPHINX E-SPORTS</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap');

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #121212;
            color: #F3F4F6;
            overflow-x: hidden;
        }

        h1,
        h2,
        h3,
        h4,
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
        }

        .golden-gradient {
            background: linear-gradient(135deg, #FBBF24 0%, #FDE047 100%);
        }

        .golden-text {
            background: linear-gradient(135deg, #FBBF24 0%, #FDE047 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Estilização da barra de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1A1025;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #FBBF24;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #FDE047;
        }
    </style>
</head>

<body class="bg-vortex-dark text-white flex flex-col min-h-screen">

    <nav
        class="bg-black/80 backdrop-blur-md fixed w-full z-40 border-b border-gray-800 py-4 px-6 md:px-12 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <a href="/" class="flex items-center space-x-2">
                <div class="w-10 h-10 rounded-full golden-gradient flex items-center justify-center">
                    <span class="font-orbitron text-black text-lg font-bold">S</span>
                </div>
                <h1 class="font-orbitron text-xl md:text-2xl font-bold tracking-wider">SPHINX</h1>
            </a>
        </div>

        <div class="hidden md:flex space-x-8">
            <a href="/" class="text-white hover:text-amber-300 font-medium transition">HOME</a>
            <a href="/equipe" class="text-white hover:text-amber-300 font-medium transition">TEAM</a>
            <a href="#" class="text-white hover:text-amber-300 font-medium transition">MATCHES</a>
            <a href="/loja" class="text-white hover:text-amber-300 font-medium transition">SHOP</a>
            <a href="#" class="text-white hover:text-amber-300 font-medium transition">NEWS</a>
        </div>

        <div class="flex items-center space-x-4">
            <a href="/loja" class="text-gray-400 hover:text-white transition flex items-center gap-2">
                <i data-feather="arrow-left"></i> Voltar à Loja
            </a>
        </div>
    </nav>

    <section class="pt-32 pb-8 bg-gradient-to-b from-gray-900 to-vortex-dark text-center">
        <div class="container mx-auto">
            <h1 class="font-orbitron text-4xl md:text-5xl font-bold text-amber-300">SEU CARRINHO</h1>
        </div>
    </section>

    <main class="container mx-auto px-6 md:px-12 py-8 flex-grow">
        <div id="empty-cart-message" class="hidden text-center py-16">
            <i data-feather="shopping-cart" class="mx-auto w-16 h-16 text-gray-600 mb-4"></i>
            <h2 class="text-2xl font-orbitron text-gray-400 mb-4">Seu carrinho está vazio</h2>
            <a href="/loja"
                class="inline-block px-6 py-3 golden-gradient text-black font-bold rounded hover:opacity-90 transition">
                EXPLORAR A LOJA
            </a>
        </div>

        <div id="cart-content" class="hidden flex flex-col lg:flex-row gap-8">
            <!-- Lista de Itens -->
            <div class="flex-grow space-y-4" id="cart-items-container">
                <!-- Items serão injetados aqui via JS -->
            </div>

            <!-- Resumo do Pedido -->
            <div class="w-full lg:w-1/3">
                <div class="bg-gray-900 border border-gray-800 rounded-lg p-6 sticky top-32">
                    <h3 class="font-orbitron text-xl text-white mb-6 border-b border-gray-800 pb-4">RESUMO DO PEDIDO
                    </h3>

                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between text-gray-400">
                            <span>Subtotal</span>
                            <span id="cart-subtotal">$0.00</span>
                        </div>
                        <div class="flex justify-between text-gray-400">
                            <span>Frete</span>
                            <span class="text-green-400">Grátis</span>
                        </div>
                    </div>

                    <div
                        class="flex justify-between text-xl font-bold text-amber-300 border-t border-gray-800 pt-4 mb-6">
                        <span>Total</span>
                        <span id="cart-total">$0.00</span>
                    </div>

                    <button onclick="checkout()"
                        class="w-full py-3 golden-gradient text-black font-bold rounded hover:opacity-90 transition mb-3">
                        FINALIZAR COMPRA
                    </button>
                    <button onclick="limparCarrinho()"
                        class="w-full py-2 border border-red-900 text-red-500 hover:bg-red-900/20 rounded transition text-sm">
                        LIMPAR CARRINHO
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black py-8 px-6 md:px-12 border-t border-gray-800 mt-auto">
        <div class="container mx-auto text-center text-gray-500">
            © 2025 SPHINX E-SPORTS. All rights reserved.
        </div>
    </footer>

    <script>
        feather.replace();

        function renderizarCarrinho() {
            const carrinho = JSON.parse(localStorage.getItem('sphinx_carrinho')) || [];
            const container = document.getElementById('cart-items-container');
            const emptyMsg = document.getElementById('empty-cart-message');
            const cartContent = document.getElementById('cart-content');

            if (carrinho.length === 0) {
                emptyMsg.classList.remove('hidden');
                cartContent.classList.add('hidden');
                return;
            }

            emptyMsg.classList.add('hidden');
            cartContent.classList.remove('hidden');
            cartContent.classList.add('flex'); // Restore flex layout

            container.innerHTML = '';
            let subtotal = 0;

            carrinho.forEach(item => {
                const totalItem = item.preco * item.quantidade;
                subtotal += totalItem;

                const div = document.createElement('div');
                div.className = 'flex flex-col sm:flex-row items-center bg-gray-900 border border-gray-800 rounded-lg p-4 gap-4';
                div.innerHTML = `
                    <div class="w-24 h-24 bg-gray-800 rounded flex-shrink-0 overflow-hidden">
                        <img src="${item.imagem}" alt="${item.nome}" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow text-center sm:text-left">
                        <h4 class="font-orbitron text-lg text-white">${item.nome}</h4>
                        <p class="text-amber-300 font-bold">$${item.preco.toFixed(2)}</p>
                    </div>
                    <div class="flex items-center bg-gray-800 rounded">
                        <button onclick="alterarQuantidade('${item.id}', -1)" class="px-3 py-1 text-gray-400 hover:text-white">-</button>
                        <span class="px-2 text-white w-8 text-center">${item.quantidade}</span>
                        <button onclick="alterarQuantidade('${item.id}', 1)" class="px-3 py-1 text-gray-400 hover:text-white">+</button>
                    </div>
                    <div class="text-right min-w-[80px]">
                        <p class="text-white font-bold">$${totalItem.toFixed(2)}</p>
                    </div>
                    <button onclick="removerItem('${item.id}')" class="text-red-500 hover:text-red-400 p-2">
                        <i data-feather="trash-2" class="w-5 h-5"></i>
                    </button>
                `;
                container.appendChild(div);
            });

            document.getElementById('cart-subtotal').innerText = '$' + subtotal.toFixed(2);
            document.getElementById('cart-total').innerText = '$' + subtotal.toFixed(2);
            feather.replace();
        }

        function alterarQuantidade(id, delta) {
            let carrinho = JSON.parse(localStorage.getItem('sphinx_carrinho')) || [];
            const item = carrinho.find(i => i.id === id);
            if (item) {
                item.quantidade += delta;
                if (item.quantidade <= 0) {
                    carrinho = carrinho.filter(i => i.id !== id);
                }
                localStorage.setItem('sphinx_carrinho', JSON.stringify(carrinho));
                renderizarCarrinho();
            }
        }

        function removerItem(id) {
            let carrinho = JSON.parse(localStorage.getItem('sphinx_carrinho')) || [];
            carrinho = carrinho.filter(i => i.id !== id);
            localStorage.setItem('sphinx_carrinho', JSON.stringify(carrinho));
            renderizarCarrinho();
        }

        function limparCarrinho() {
            if (confirm('Tem certeza que deseja esvaziar o carrinho?')) {
                localStorage.removeItem('sphinx_carrinho');
                renderizarCarrinho();
            }
        }

        function checkout() {
            alert('Funcionalidade de checkout em desenvolvimento! Obrigado por testar.');
        }

        document.addEventListener('DOMContentLoaded', renderizarCarrinho);
    </script>
</body>

</html>
